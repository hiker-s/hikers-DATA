<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>지도 경로 표시</title>
    <!-- Leaflet CSS -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
    <!-- Leaflet JS -->
    <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
  </head>
  <body>
    <!-- 지도를 표시할 div -->
    <div id="map" style="height: 600px"></div>

    <script>
      // Leaflet 지도 초기화
      const map = L.map("map").setView([38.084709, 128.448883], 14);

      // OpenStreetMap 타일 레이어 추가
      L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png").addTo(
        map
      );

      // 주어진 JSON 데이터
      const jsonData = {
        track: [
          {
            path_id: 0,
            path: [
              {
                lat: 38.084709,
                lng: 128.448883,
              },
              {
                lat: 38.090847,
                lng: 128.449371,
              },
            ],
            color: "#490150",
            start_name: "남설악탐방지원센터 / 남설악화장실",
            end_name: "의자",
            length_meter: 684.2,
            time_minute: 11,
          },
          {
            path_id: 1,
            path: [
              {
                lat: 38.090847,
                lng: 128.449371,
              },
              {
                lat: 38.095238,
                lng: 128.450348,
              },
            ],
            color: "#9dc012",
            start_name: "의자",
            end_name: "오색1쉼터",
            length_meter: 495.7,
            time_minute: 6,
          },
          {
            path_id: 2,
            path: [
              {
                lat: 38.095238,
                lng: 128.450348,
              },
              {
                lat: 38.096855,
                lng: 128.453903,
              },
            ],
            color: "#599c7b",
            start_name: "오색1쉼터",
            end_name: "갈림길",
            length_meter: 359.3,
            time_minute: 4,
          },
          {
            path_id: 3,
            path: [
              {
                lat: 38.096855,
                lng: 128.453903,
              },
              {
                lat: 38.103073,
                lng: 128.456665,
              },
            ],
            color: "#69a82e",
            start_name: "갈림길 / 쉼터",
            end_name: "설악폭포",
            length_meter: 732.5,
            time_minute: 12,
          },
          {
            path_id: 4,
            path: [
              {
                lat: 38.103073,
                lng: 128.456665,
              },
              {
                lat: 38.110825,
                lng: 128.460464,
              },
            ],
            color: "#0a1025",
            start_name: "설악폭포",
            end_name: "오색2쉼터",
            length_meter: 923.9,
            time_minute: 11,
          },
          {
            path_id: 5,
            path: [
              {
                lat: 38.110825,
                lng: 128.460464,
              },
              {
                lat: 38.119102,
                lng: 128.465347,
              },
            ],
            color: "#012325",
            start_name: "오색2쉼터",
            end_name: "대청봉",
            length_meter: 1014.7,
            time_minute: 12,
          },
          {
            path_id: 6,
            path: [
              {
                lat: 38.119102,
                lng: 128.465347,
              },
              {
                lat: 38.119114,
                lng: 128.465347,
              },
            ],
            color: "#a0b066",
            start_name: "대청봉",
            end_name: "공룡능선",
            length_meter: 1.3,
            time_minute: 0,
          },
        ],
      };

      // 경로 그리기
      jsonData.track.forEach(function (section) {
        const latlngs = section.path.map((point) => [point.lat, point.lng]);
        const color = section.color;

        // 경로를 Polyline으로 지도에 추가
        L.polyline(latlngs, {
          color: color,
          weight: 5,
          opacity: 0.7,
        }).addTo(map);

        // 시작점과 끝점에 마커 추가
        L.marker(latlngs[0]).addTo(map).bindPopup(section.start_name);
        L.marker(latlngs[latlngs.length - 1])
          .addTo(map)
          .bindPopup(section.end_name);
      });
    </script>
  </body>
</html>
